services:
  unbound:
    image: alpinelinux/unbound:latest
    container_name: unbound
    restart: unless-stopped
    network_mode: host

    volumes:
      - ./unbound.conf:/etc/unbound/unbound.conf:ro

    environment:
      - TZ=UTC
    # Volumes - uncomment the entire volumes section AND specific mounts you need
    # volumes:
    # Custom main configuration
    # - ./unbound.conf:/etc/unbound/unbound.conf:ro

    # Additional config snippets directory
    # - ./unbound.conf.d:/etc/unbound/unbound.conf.d:ro

    # Ad-blocking/custom blocklists
    # - ./blocklists:/etc/unbound/blocklists:ro

    # Local zone definitions (custom domains)
    # - ./local-zones.conf:/etc/unbound/local-zones.conf:ro

    # Persistent cache (survives container restarts)
    # - unbound-cache:/var/lib/unbound

    # Root hints file (optional, for direct root server queries)
    # - ./root.hints:/etc/unbound/root.hints:ro

    # Network configuration - uncomment both network section AND the networks definition below
    # networks:
    #   - dns-network

    # Don't set upstream DNS - let Unbound do recursive resolution
    # This is the whole point of using Unbound!

    # Environment variables - uncomment entire environment section AND specific vars
    # environment:
    #   - TZ=UTC

    # Security hardening - uncomment entire section to enable
    # cap_drop:
    #   - ALL
    # cap_add:
    #   - NET_BIND_SERVICE
    # read_only: true
    # tmpfs:
    #   - /tmp
    #   - /run

    # Resource limits - uncomment to prevent resource hogging
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '0.5'
    #       memory: 256M
    #     reservations:
    #       memory: 128M

    # Health check - uncomment to monitor container health
    # healthcheck:
    #   test: ["CMD", "drill", "@127.0.0.1", "google.com"]
    #   interval: 30s
    #   timeout: 10s
    #   retries: 3
    #   start_period: 10s

    # Logging driver - uncomment to limit log size
    # logging:
    #   driver: "json-file"
    #   options:
    #     max-size: "10m"
    #     max-file: "3"
# Uncomment if using named volumes
# volumes:
#   unbound-cache:
#     driver: local

# Uncomment if using custom networks
# networks:
#   dns-network:
#     driver: bridge
#     ipam:
#       config:
#         - subnet: 172.20.0.0/16
networks:
  dns-network:
    external: true
